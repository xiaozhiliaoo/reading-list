<!DOCTYPE HTML>
<html lang="zh_CN" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>读书笔记</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><li class="part-title">目录</li><li class="chapter-item "><a href="index.html"><strong aria-hidden="true">1.</strong> 介绍</a></li><li class="chapter-item "><a href="cs/toc.html"><strong aria-hidden="true">2.</strong> 计算机科学</a></li><li class="chapter-item "><a href="language/toc.html"><strong aria-hidden="true">3.</strong> 语言</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="language/java-concurrency-in-practoce.html"><strong aria-hidden="true">3.1.</strong> Java并发编程实战</a></li></ol></li><li class="chapter-item "><a href="database/toc.html"><strong aria-hidden="true">4.</strong> 数据库</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="database/nosql-distilled.html"><strong aria-hidden="true">4.1.</strong> NoSQL精粹</a></li><li class="chapter-item "><a href="database/cassandra-the-definitive-guide-2nd.html"><strong aria-hidden="true">4.2.</strong> Cassandra权威指南-第二版</a></li><li class="chapter-item "><a href="database/ddia.html"><strong aria-hidden="true">4.3.</strong> 数据密集型应用系统设计</a></li></ol></li><li class="chapter-item "><a href="middleware/summary.html"><strong aria-hidden="true">5.</strong> 分布式与中间件</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="middleware/mongodb-the-definitive-guide-2nd.html"><strong aria-hidden="true">5.1.</strong> mongodb权威指南第二版</a></li><li class="chapter-item "><a href="middleware/nosql-for-mere-mortals.html"><strong aria-hidden="true">5.2.</strong> NoSQL实践指南</a></li><li class="chapter-item "><a href="middleware/streaming-processing-with-apache-flink.html"><strong aria-hidden="true">5.3.</strong> 基于Apache Flink的流处理</a></li><li class="chapter-item "><a href="middleware/deep-understanding-of-distributed-systems.html"><strong aria-hidden="true">5.4.</strong> 深入理解分布式系统</a></li></ol></li><li class="chapter-item "><a href="framework/toc.html"><strong aria-hidden="true">6.</strong> 框架</a></li><li class="chapter-item "><a href="engineering/toc.html"><strong aria-hidden="true">7.</strong> 软件工程</a></li><li class="chapter-item "><a href="design/toc.html"><strong aria-hidden="true">8.</strong> 设计</a></li><li class="chapter-item "><a href="certificate/toc.html"><strong aria-hidden="true">9.</strong> 考试和考证</a></li><li class="chapter-item "><a href="product/toc.html"><strong aria-hidden="true">10.</strong> 产品</a></li><li class="chapter-item "><a href="system/toc.html"><strong aria-hidden="true">11.</strong> 系统</a></li><li class="chapter-item "><a href="others/toc.html"><strong aria-hidden="true">12.</strong> 其他</a></li><li class="chapter-item "><a href="geektime/toc.html"><strong aria-hidden="true">13.</strong> 极客时间</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="geektime/技术与商业案例解读.html"><strong aria-hidden="true">13.1.</strong> 16-技术与商业案例解读-徐飞</a></li></ol></li><li class="chapter-item "><a href="paper/toc.html"><strong aria-hidden="true">14.</strong> 论文</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="paper/Stream-System-Evolution.html"><strong aria-hidden="true">14.1.</strong> A Survey on the Evolution of Stream Processing Systems</a></li></ol></li><li class="chapter-item "><a href="reference/reference.html"><strong aria-hidden="true">15.</strong> 参考资料</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="reference/reference.html"><strong aria-hidden="true">15.1.</strong> 参考资料</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">读书笔记</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/xiaozhiliaoo/reading-lists" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div style="break-before: page; page-break-before: always;"></div><h1 id="简介"><a class="header" href="#简介">简介</a></h1>
<p>我的阅读笔记，主要分为：书和论文。创建于2022-04-05。</p>
<p>购买书籍来源于此<a href="https://xiaozhiliaoo.github.io/reading-list/">reading-list</a></p>
<p>PDF书籍会在书名展示PDF，表示并未购买。</p>
<h1 id="笔记格式"><a class="header" href="#笔记格式">笔记格式</a></h1>
<h2 id="进度"><a class="header" href="#进度">进度</a></h2>
<p>开始时间：YYYY-MM-dd</p>
<table><thead><tr><th>章节</th><th>进度</th></tr></thead><tbody>
<tr><td>ch1</td><td>√</td></tr>
<tr><td>ch2</td><td>×</td></tr>
</tbody></table>
<h2 id="笔记"><a class="header" href="#笔记">笔记</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="计算机科学"><a class="header" href="#计算机科学">计算机科学</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="语言"><a class="header" href="#语言">语言</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="java并发编程实战"><a class="header" href="#java并发编程实战">Java并发编程实战</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="数据库"><a class="header" href="#数据库">数据库</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nosql精粹"><a class="header" href="#nosql精粹">NoSQL精粹</a></h1>
<h1 id="进度-1"><a class="header" href="#进度-1">进度</a></h1>
<p>P40</p>
<h1 id="笔记-1"><a class="header" href="#笔记-1">笔记</a></h1>
<p>影响NoSQL论文：Bigtable-2005,Dynamo-2007</p>
<p>关系型数据库并不是设计给集群用的。</p>
<p>CQL和SQL类似，但是差别很大。</p>
<p>NoSQL不使用SQL。</p>
<p>图数据库设计不是为了在集群上运行。分布模型和关系模型类似，但是数据模型却不同。</p>
<p>混合持久化观点：不同场景使用不同的存储方式。</p>
<p>选择NoSQL主要两个原因：1 数据量大，数据访问效率高，必须放到集群。 2 更方便数据交互方式提高程序开发效率。</p>
<p>选择NoSQL不一定是数据量大。阻抗失谐也是原因之一。</p>
<p>表和行在关系模型中叫 关系和元组。</p>
<p>关系模型和聚合模型。如何划分聚合边界，取决于如何操作数据，描述了应用程序使用数据方式。</p>
<p>键值：聚合不透明，必须获取全部聚合才行 文档：聚合透明，所以可以灵活访问数据，可以通过聚合字段查找，获取部分聚合。 列族：聚合分为列族，</p>
<p>列族：两级映射,get(id,&quot;name&quot;)。和列存数据库不一样，如C-store，</p>
<p>列存(某一列)，c-store支持关系型，column store,nosql之前就有了。 列族(一组列)：bigtable，column family database</p>
<p>cassandra 行只能出现在同一个列族里面，列族可以包括超列，列里面可以嵌套列，cassandra中的supercolumn对应bigtable里面列族。</p>
<p>图数据库：重视关系，</p>
<p>宽行(许多列，每行不一样)和窄行(很少列，相同行较多)。</p>
<p>无模式的灵活性适用于聚合内部，聚合边界改动了，也会和关系型一样复杂。</p>
<p>关系型不存在聚合结构，所以可以用不同方式访问数据。聚合结构本质是查询结构。聚合结构定了，那么查询模式很有限。</p>
<p>程序需要处理和聚合结构不一样的查询：物化视图。关系型里面叫视图。</p>
<p>cassandra没有丰富的查询语言，所以设计数据模型适合，优化列和列族，以提高读取速度。CQL不支持join和subquery，where子句也很简单。</p>
<h2 id="对比"><a class="header" href="#对比">对比</a></h2>
<table><thead><tr><th>关系型</th><th>Riak(KV)</th><th>MongoDB(Document)</th><th>Cassnadra(Column Family)</th></tr></thead><tbody>
<tr><td>数据库实例</td><td>Riak集群</td><td>MongoDB实例</td><td>Cluster</td></tr>
<tr><td>模式 schema</td><td>namespace</td><td>database</td><td>keyspace</td></tr>
<tr><td>表</td><td>Bucket</td><td>Collection</td><td>column family</td></tr>
<tr><td>行</td><td>key-value</td><td>document</td><td>row</td></tr>
<tr><td>列</td><td></td><td>field</td><td>column</td></tr>
<tr><td>rowid</td><td>key</td><td>_id</td><td>rowkey</td></tr>
<tr><td>join</td><td></td><td>DBRef</td><td></td></tr>
<tr><td>存储</td><td>字节</td><td>BSON，XML，JSON</td><td></td></tr>
<tr><td>结构</td><td>一维hash table</td><td>JSON</td><td>多维hash table</td></tr>
<tr><td>适合场景</td><td>会话信息，用户配置，购物车，关键字查询，无法通过属性查询</td><td>接近关系型查询模型，事件记录，内容管理系统，博客平台，用户评论，用户注册，配置，面向web的文档，网站分析，实时分析，PV，UV，电商：产品和订单，灵活的模式</td><td>事件记录，博客&quot;tag&quot;，&quot;link&quot;，&quot;category&quot;,计数器，查询模式提前可知</td></tr>
<tr><td>不适合场景</td><td>数据建关系，含有多项事务，查询数据，操作多个关键字</td><td>多项复杂事务，跨文档原子操作，灵活持续变化的聚合结构，</td><td>ACID，聚合(SUM,AVG)，早期技术方案无法确定查询模式，查询模式变化，列族也要变化，改变查询模式比改变数据模式代价高</td></tr>
</tbody></table>
<h1 id="参考"><a class="header" href="#参考">参考</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cassandra权威指南-第二版"><a class="header" href="#cassandra权威指南-第二版">Cassandra权威指南-第二版</a></h1>
<h1 id="进度-2"><a class="header" href="#进度-2">进度</a></h1>
<p>P277</p>
<h1 id="笔记-2"><a class="header" href="#笔记-2">笔记</a></h1>
<p>PCRS:partition column,cluster column,regular column,static column</p>
<p>Primary Key=PC</p>
<h1 id="参考-1"><a class="header" href="#参考-1">参考</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="数据密集型应用系统设计"><a class="header" href="#数据密集型应用系统设计">数据密集型应用系统设计</a></h1>
<h2 id="进度-3"><a class="header" href="#进度-3">进度</a></h2>
<table><thead><tr><th>章节</th><th>进度</th></tr></thead><tbody>
<tr><td>ch8</td><td>√</td></tr>
<tr><td>ch9</td><td>×</td></tr>
</tbody></table>
<h2 id="笔记-3"><a class="header" href="#笔记-3">笔记</a></h2>
<p>线性化会显著降低性能和可用性。</p>
<p>2PC是一种共识算法，虽然不是多优秀。</p>
<p>共识意味着某一项提议，所有节点做出一致的决定，而且决定不可撤销。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="分布式与中间件"><a class="header" href="#分布式与中间件">分布式与中间件</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mongodb权威指南第二版"><a class="header" href="#mongodb权威指南第二版">mongodb权威指南第二版</a></h1>
<p>MongoDB:the definitive guide, second edition</p>
<h1 id="进度-4"><a class="header" href="#进度-4">进度</a></h1>
<p>P201</p>
<h1 id="笔记-4"><a class="header" href="#笔记-4">笔记</a></h1>
<p>ObjectId</p>
<p>mongorc.js</p>
<p>mongo shell 是js程序</p>
<p>padding factor</p>
<p>&quot;$where&quot;查询比常规的查询慢很多。</p>
<p>limit,skip,sort</p>
<p>mongodb explain命令</p>
<p>建立索引 ensureIndex</p>
<p>mongodb每个集合只能有64个索引，复合索引也有顺序</p>
<p>'_id'索引是典型的右平衡索引。右平衡索引树。</p>
<p>只有需要多个查询条件进行排序时候，索引方向才是重要的。</p>
<p>覆盖索引：covered index</p>
<p>数组字段做索引，永远无法覆盖。</p>
<p>索引基数。一个字段基数越高，建立索引越有用。</p>
<p>explain不使用索引：BasicCursor，使用索引：BtreeCursor</p>
<p>查询优化器：并行执行，返回最快的100个就是胜者。</p>
<p>索引需要两次查找，全表扫描只需要一次。</p>
<p>文档会在磁盘移动。</p>
<p>GirdFS是MongoDB中存储大文件的标准方式，使用了复合唯一索引。</p>
<p>稀疏索引：spares index</p>
<p>特殊集合：固定集合，TTL索引，全文本索引，地理空间索引（2dsphere，GEOJSON），GridFS。</p>
<p>GridFS：将大文件分割为多个比较大的块，将每一个块作为独立的文档进行存储。不常改变但是经常需要连续访问的大文件，适合GridFS.</p>
<p>聚合：聚合框架，Map-Reduce，Cmd(count,group,distinct)</p>
<p>mongodb没有join.查询只能在一个集合内。范式化提高写入速度，反范式化提高读取速度。</p>
<p>数据变化频繁，范式化较好，不频繁，反范式化较好。</p>
<p>副本集：只有达到大多数才能选举或者维持主节点，为了避免出现多个主节点。
支持单一主节点。</p>
<p>mongodb复制功能基于oplog实现的，oplog按顺序保存所有执行过的写操作，每个成员维护着一份自己的oplog，每个成员的oplog应该和主节点的oplog完全一致。</p>
<h1 id="参考-2"><a class="header" href="#参考-2">参考</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nosql实践指南"><a class="header" href="#nosql实践指南">NoSQL实践指南</a></h1>
<h1 id="进度-5"><a class="header" href="#进度-5">进度</a></h1>
<p>P230，快速看本书可以从P276开始</p>
<h1 id="笔记-5"><a class="header" href="#笔记-5">笔记</a></h1>
<p>使用NoSQL的动机：可伸缩性，成本开销，灵活性，可用性。</p>
<p>例子：购物车，用户自己看，别人不会看， kv类型。</p>
<p>2PC:降低可用性提高一致性。</p>
<p>CAP:P分区指的是网络分区。</p>
<p>ACID：C 数据库事务不会使得数据库陷入数据完整性收到破环。</p>
<p>BASE：basically available：出了故障，其余部分可用, s:soft state 数据最终会被新值所覆写  eventually consistent:副本数据暂时不一致</p>
<p>软状态：不刷新就会过期的数据。</p>
<p>最终一致性：因果，读自己写，会话，单调读(读读)，单调写(写写)</p>
<p>键值数据库最简单。查询受限。只能根据K查询。</p>
<p>文档数据库的文档，指的是以字符串或字符串二进制存储的数据结构。JSON或者XML。半结构化的实体。可以根据属性查询文档。</p>
<p>列族数据库：每一行有不同的列。关系数据库每一行列相同。</p>
<p>用户，订单，支付 在关系型是三张表，但是列组里面一张表。</p>
<h2 id="kv"><a class="header" href="#kv">KV</a></h2>
<p>数组-&gt;关联数组-&gt;缓存-&gt;内存键值数据库-&gt;磁盘键值数据库</p>
<p>主从，有写入压力，无主，无写入压力</p>
<p>关键词：键值，命名空间，分区，分区键，schemaless，集群，无主(ring)，</p>
<p>内存型 kv ：redis，磁盘型 kv：leveldb</p>
<p>Redis：主从  Riak：无主</p>
<p>如果发现总是在设计较大的数值结构，可能需要文档数据库。</p>
<p>OracleNoSQL支持表格结构。支持高级搜索功能：Riak</p>
<p>KV模拟表格，关系型数据库。</p>
<h2 id="document"><a class="header" href="#document">document</a></h2>
<p>文档是键值对的集合。</p>
<p>文档和kv比，优势在于相关属性可以放在同一个对象内。</p>
<p>相似的文档叫集合。文档-行，集合-表</p>
<p>文档支持CRUD操作。</p>
<p>水平分区就是分片技术。</p>
<p>html是文档。和文档数据库很类似。</p>
<p>kv不需要关系反范式化，文档则需要。</p>
<p>数据范式化意味着：关联/join。少冗余。</p>
<p>KV不需要query processor,而文档需要。需要处理AND,OR等操作。</p>
<p>关系型：订单和顾客信息分开放，这样删除完用户订单后，顾客信息不会丢失。文档型：总是关联数据放在一起。</p>
<p>一对一关系：一个文档实现
一对多关系：嵌套文档实现
多对多关系：两个集合来实现
层级关系：指向父节点或子节点，列出所有上级节点。</p>
<h2 id="column"><a class="header" href="#column">Column</a></h2>
<p>宽列数据库，</p>
<p>行由列族组成。</p>
<p>值由行标识符，列名，时间戳来索引。</p>
<p>row key vs primary key</p>
<p>列族是map of map</p>
<p>当数据库不一致时候，会产生信息熵。 反熵算法修复副本不一致：检测副本之间是否有数据差异的一套流程，交换很少数据，发现副本不一致。发送hash码：如merkle树过去检测。</p>
<p>hash tree快速判断数据集是否一致。</p>
<p>提示移交，不用担心暂时写不进去，节点恢复后会移交数据。写入请求先保存。</p>
<p>cassandra的primary key就是row key=Partition key column+Clustering columns.</p>
<p>写入较多适合列祖数据库。</p>
<p>术语：keyspace，row key，column，column family</p>
<p>列由列明，时间戳，列值组成。</p>
<p>列族常用技术：集群，分区，提交日志，bloom过滤器，一致性级别。</p>
<p>LSM tree较多。</p>
<p>分配给布隆过滤器内存越大，越不容易出错。1%假阳性，10个二进制位表示每个元素，在多5个二进制位，错误率降低到0.1%。</p>
<p>列族设计是用户驱动的。需要先回答问题，才能开始设计。设计从查询入手。</p>
<p>列族数据库是稀疏，多维的map，列可以动态添加，数据行的列不同。（user_by_product,product_by_user）</p>
<p>适合存放：稀疏多维数据集，大量数据(HBase,Bigtable.Cassandra)，且大数据有关。</p>
<h2 id="选型"><a class="header" href="#选型">选型</a></h2>
<table><thead><tr><th>类别</th><th>考虑</th></tr></thead><tbody>
<tr><td>Relation</td><td>关系型数据<br />case：交易，数仓</td></tr>
<tr><td>KV</td><td>频繁读取，少量写入<br />缓存关系型数据<br />web程序容易变化属性，购物车<br />配置信息，用户数据信息<br />领域数据模型较为简单<br />case：购物车，缓存</td></tr>
<tr><td>Document</td><td>读写较大<br />属性多变数据，灵活的数据<br />JSON结构的程序<br />大结构反范式化数据<br />查询模式较多<br />case：cms系统</td></tr>
<tr><td>Column Family</td><td>总是可写<br />多数据中心<br />副本暂时不一致<br />字段经常变化<br />数据量很大，大数据级别，TB级别<br />case:大量设备分析日志，分析客户特征，提供个性化内容</td></tr>
<tr><td>Graph</td><td>社交网络<br />推荐产品服务<br />case：计算机网络，社交网站</td></tr>
</tbody></table>
<h1 id="参考-3"><a class="header" href="#参考-3">参考</a></h1>
<h2 id="paper"><a class="header" href="#paper">Paper</a></h2>
<p>Key-Value stores: a practical overview</p>
<p>Towards Robust Distributed Systems</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="基于apache-flink的流处理流式应用基础实现及操作"><a class="header" href="#基于apache-flink的流处理流式应用基础实现及操作">基于Apache Flink的流处理:流式应用基础、实现及操作</a></h1>
<h1 id="进度-6"><a class="header" href="#进度-6">进度</a></h1>
<h2 id="次数"><a class="header" href="#次数">次数</a></h2>
<p>1</p>
<h2 id="已读"><a class="header" href="#已读">已读</a></h2>
<p>Ch1  √</p>
<p>Ch2 √</p>
<p>Ch3 √</p>
<p>Ch4 √</p>
<p>Ch5 √</p>
<p>Ch6</p>
<p>Ch7</p>
<p>Ch8 √</p>
<p>Ch9</p>
<p>Ch10</p>
<p>Ch11 √</p>
<h2 id="未读"><a class="header" href="#未读">未读</a></h2>
<h1 id="笔记-6"><a class="header" href="#笔记-6">笔记</a></h1>
<p>有状态：处理时间需要依赖已经处理过事件。</p>
<p>事件时间：水位线，触发器，窗口等机制保证了结果准确性。产生可重现且一致性的结果。 处理时间：机器时间，低延迟，但是结果具有不确定性。</p>
<p>水位线：允许应用控制结果完整性和延迟。</p>
<p>中间件复杂度：1 redis 单API 2 mq 两API 3 stream 三API source,process,sink</p>
<p>一致性：应用状态的一致性和保证输出一致性不同。</p>
<p>Flink是一个用于状态化并行流处理的分布式系统。</p>
<p>组件：JobManager，ResourceManager，TaskManager, Dispatcher</p>
<p>https://github.com/lw-lin/streaming-readings</p>
<p>paper:DataFlow+ABS</p>
<p>检查点基于Chandy-Lamport实现</p>
<p>Flink故障恢复算法基于状态的检查点实现。</p>
<p>检查点和保存点。</p>
<p>end-to-end consistency (这里的一致性和ACID的一致性一样,端到端的一致性如何保证？) 和 端到端精确一次处理语义？</p>
<p>Sink的事务性保证：1 WAL 2 2PC</p>
<p>数据库事务特性ACID和Kafka事务（隔离性/原子性）的特性？</p>
<p>Kafka事务隔离性对于消费者来说的，提交对生产者说的。</p>
<p>Flink数据源连接器可重放输出情况下才能为应用提供一致性保证，应用端到端一致性保证取决于sink 连接器的数学。需要具备幂等或者事务支持。</p>
<p>WAL：Cassandra GenericWriteAheadSink  2PC：Kafka TwoPhaseCommitSinkFunction</p>
<p>class FlinkKafkaProducer<IN> extends TwoPhaseCommitSinkFunction</p>
<p>从访问外部丰富数据流：AsyncFunction，处理过程中读取外部存储。 https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/operators/asyncio/</p>
<p>DataStream/DataSet/Table/CEP/Gelly</p>
<p>FlinkSQL 基于 Calcite</p>
<h1 id="参考-4"><a class="header" href="#参考-4">参考</a></h1>
<p>https://flink.apache.org/features/2018/03/01/end-to-end-exactly-once-apache-flink.html</p>
<p>https://bahir.apache.org/ </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="深入理解分布式系统"><a class="header" href="#深入理解分布式系统">深入理解分布式系统</a></h1>
<h1 id="google-httpszhuanlanzhihucomp338161224"><a class="header" href="#google-httpszhuanlanzhihucomp338161224">Google https://zhuanlan.zhihu.com/p/338161224</a></h1>
<p>FlumeJava: Easy, Efficient Data-Parallel Pipelines</p>
<p>Tenzing A SQL Implementation On The MapReduce Framework</p>
<p>MillWheel: Fault-Tolerant Stream Processing at Internet Scale</p>
<p>Pregel: a system for large-scale graph processing </p>
<p>MapReduce: Simplified Data Processing on Large Clusters</p>
<p>Large-scale Incremental Processing Using Distributed Transactions and Notifications</p>
<p>Processing a Trillion Cells per Mouse Click(PowerDrill)</p>
<p>Megastore: Providing Scalable, Highly Available Storage for Interactive Services</p>
<p>Spanner: Google's Globally-Distributed Database</p>
<p>Bigtable: A Distributed Storage System for Structured Data</p>
<p>Dapper, a Large-Scale Distributed Systems Tracing Infrastructure</p>
<p>The Google File System</p>
<p>Colossus: Successor to the Google File System (GFS)</p>
<p>CPI2: CPU performance isolation for shared compute clusters</p>
<p>The Chubby lock service for loosely-coupled distributed systems</p>
<p>Large-scale cluster management at Google with Borg</p>
<p>Omega: flexible, scalable schedulers for large compute clusters</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="框架"><a class="header" href="#框架">框架</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="软件工程"><a class="header" href="#软件工程">软件工程</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="设计"><a class="header" href="#设计">设计</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="考试和考证"><a class="header" href="#考试和考证">考试和考证</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="产品"><a class="header" href="#产品">产品</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="系统"><a class="header" href="#系统">系统</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="其他"><a class="header" href="#其他">其他</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="极客时间"><a class="header" href="#极客时间">极客时间</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="16-技术与商业案例解读-徐飞"><a class="header" href="#16-技术与商业案例解读-徐飞">16-技术与商业案例解读-徐飞</a></h1>
<table><thead><tr><th>软件</th><th>商业公司/发行商/专业公司</th><th>创始人</th></tr></thead><tbody>
<tr><td>MongoDB</td><td>MongoDB.com</td><td></td></tr>
<tr><td>Hadoop</td><td>Cloudera</td><td></td></tr>
<tr><td>Hadoop</td><td>MapR</td><td></td></tr>
<tr><td>Hadoop</td><td>Hortonworks</td><td></td></tr>
<tr><td>Kafka</td><td>Confluent.com</td><td></td></tr>
<tr><td></td><td>Palantir</td><td></td></tr>
<tr><td></td><td>Splunk</td><td></td></tr>
<tr><td>HBase</td><td></td><td></td></tr>
<tr><td>Cassandra</td><td>DataStax</td><td></td></tr>
<tr><td>Spark</td><td>Databricks</td><td></td></tr>
<tr><td>Flink</td><td>Data Artisans</td><td></td></tr>
<tr><td>Spring，RabbitMQ，Greenplum，Cloud Foundry</td><td>Pivotal</td><td></td></tr>
<tr><td>MySQL, MariaDB, PostgreSQL, <br />MongoDB and RocksDB</td><td>Percona</td><td></td></tr>
<tr><td>MySQL</td><td>Oracle</td><td></td></tr>
<tr><td>Akka</td><td>Lightbend</td><td></td></tr>
<tr><td>Apache Drill，Apache Arrow</td><td>Dremio</td><td></td></tr>
<tr><td>Apache Druid</td><td>Imply</td><td></td></tr>
<tr><td>Apache Kylin</td><td>Kyligence</td><td></td></tr>
<tr><td>Snowflake</td><td>Snowflake</td><td></td></tr>
<tr><td>TiDB</td><td>PingCAP</td><td></td></tr>
<tr><td>Hazelcast</td><td>Hazelcast.com</td><td></td></tr>
<tr><td>Redis</td><td>redis.com</td><td></td></tr>
<tr><td>Dubbo,Seata,RocketMQ,SpringCloudAlibaba .....</td><td>Alibaba</td><td></td></tr>
<tr><td>Databend</td><td>Databend</td><td></td></tr>
<tr><td>Apache Pulsar，Apache BookKeeper</td><td>steamnative</td><td></td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="论文"><a class="header" href="#论文">论文</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="a-survey-on-the-evolution-of-stream-processing-systems"><a class="header" href="#a-survey-on-the-evolution-of-stream-processing-systems">A Survey on the Evolution of Stream Processing Systems</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="参考资料"><a class="header" href="#参考资料">参考资料</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="参考资料-1"><a class="header" href="#参考资料-1">参考资料</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>
        <script type="text/javascript" src="smart-anchor.js"></script>
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        <script src="https://utteranc.es/client.js"
        repo="RustMagazine/rust_magazine_2021"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async></script>

    </body>
</html>
